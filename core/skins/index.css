
/*!
 * Weaving (Default) skin for Wedge
 * © 2010 René-Gilles Deberdt, http://wedge.org
 */

/**
 * This is the base CSS file for the default theme.
 *
 * Here's a list of files that can be restyled by adding a new subfolder to the CSS folder:
 * - index.css, sections.css, mana.css, editor.css
 * - custom.css doesn't exist, you can create it then rewrite styles without modifying the original files.
 * - extra.css isn't always there, it's intended as an easy way to add CSS at the very end of the file.
 *
 * There are also user-specific stylesheets. If you need to add a browser hack, just create a new file in
 * your folder, using this file name format: filename.suffix.css. For instance, if you want to add some custom
 * CSS to index.css for IE6, name it index.ie6.css. The following suffixes are available to you:
 *
 * - guest, member, admin, rtl, m#, b#, c#
 * - will target guests, members, administrators, RTL languages, member #, board # or category #.
 *
 * - opera, firefox, chrome, safari, ie, gecko, webkit (also with version number/range: ie[6-7], firefox[-3.5])
 * - windows, ios, android (also with version number/range: ios[5.1-], windows6.1)
 * - will target that browser, browser family or OS.
 *
 * - local, global, replace
 * - any file with the 'local' keyword won't be reused by sub-skins. Use 'global' (or no keyword) to allow re-use.
 *   Finally, 'replace' will do the opposite and, just like replace-type skins do, it will forget any parent files
 *   with the same keywords (e.g. index.replace,ie6.css will replace the parent's index.ie6.css file if it exists.)
 *
 * Files "install.css" and "report.css" are theme-agnostic, and thus are not skinnable per se.
 *
 * Go crazy with CSS comments like this; they're automatically deleted when the cache is generated.
 * CSS cached files are put inside the /css/ folder, so any relative URLs will fail unless they use it
 * as their root, or use the available path variables.
 *
 * $language - current user's language - see Wine/Warm/skin.xml for details
 * $images - assets (image) folder URL
 * $here - current skin's root folder URL
 * $root - forum's root URL
 *
 * e.g. If you have a file called sprite.png in your custom "skins/Hello/World"
 * skin folder, link to url($here/sprite.png) rather than url(sprite.png).
 */

/* The main styling that everything else should inherit.
	Font size should be the same in all browsers if using
	a percentage. Also reset HTML5 elements we use.
------------------------------------------------------- */

html
	min-height: 100%
	overflow-y: scroll
	background: #369																			// For old browsers...
	background: fixed linear-gradient(45deg, #505b66, #a0a6ab 500px, #505b66 1000px, #505b66)	// Fallback background for browsers that support linear gradients...
	background: radial-gradient(circle at 50% 40%, #eee, #012)									// And this is the one we want. Phew...

body
	color: #ccc
	font: $main_font_size $main_font
	margin: 0
	@if !mobile
		padding: 12px
	@endif
	@if !ie10 && !chrome
		transition: all .3s ease
	@endif

// html5shiv does the job automatically for IE < 9.
@if !(opera[11.1-], safari[5-], chrome[6-], firefox[4-], android[2.2-])
	header, footer, aside, section, article, nav
		display: block
@endif

/* Let's be crazy... Universal selector! This should
	prevent words from breaking the layout. Obviously,
	reset to 'normal' on specific selectors as needed.
------------------------------------------------------- */

*
	@if !ie6
		word-wrap: break-word
	@endif

/* Mobile Chrome 25+ adds a 'font boosting' feature that's
	supposed to make text more readable; as of May 2013, it sucks.
	This resets all elements to have the same size -- a bit smaller,
	but at least we now have full control over said size.
--------------------------------------------------------------- */

	@if chrome[25-] && mobile
		max-height: 999999em
	@endif

/* Common styles used for inheritance. You can declare
	them anywhere you like, but having them near the
	start of the file should avoid cascading issues.
------------------------------------------------------- */

// Alternating generic backgrounds
.windowbg
	color: #444
	background-color: $window_bg

.windowbg2 extends .windowbg
	background-color: $window_bg2

.windowbg3 extends .windowbg
	background-color: $window_bg3

.two-columns mixes .inline-block
	box-sizing: border-box
	vertical-align: top
	width: 48.8%
	margin: 0 .4%

.splitter
	columns: 2
	column-gap: 2em
	column-rule: 1px solid #eee
	> section
		break-inside: avoid

// Two columns become one if viewed on a small screen.
@media all and (max-width: 800px)
	.two-columns
		width: 100%
		margin: 0
	.splitter
		columns: 1

// By default set the color on these tags to #000.
h1, h2, h3, h4, h5, h6
	color: #000
	font-size: 1em
	margin, padding: 0

/* Main layout declarations (body, sidebar...)
------------------------------------------------------- */

#wedge
	max-width: 1240px
	border-radius: $radius
	margin: auto
	color: #444
	&.sliding
		overflow: hidden

@if $radius
	#header
		border-radius: $radius $radius 0 0
@endif

#content, #linktree
	background: $main_bg

#header, #navi, #footer
	@if $head_bg
		background-color: luma($head_bg, +3%)
		gradient: luma($head_bg, +6%), $head_bg
	@else
		background: $main_bg
	@endif
	color: #553

#navi
	background-color: $head_bg
	background-image: none

#edge
	width: 100%
	display: table
	table-layout: fixed

#sideshow mixes .hide
	cursor: pointer
	padding: 5px 0 0 1em
	float: right
	width: 16px
	// These will still need a px-based fallback, for a few years at least.
	@if mobile
		width: 5$vmin
	@endif
	div
		@if mobile
			height: 2px
			height: .66$vmin
			margin: 3px 0
			margin: .7$vmin 0
		@else
			height: 2px
			margin: 3px 0
		@endif
		background: #888
		transition: all .3s ease
	:hover div
		background: #600

#sidebar
	display: table-cell
	vertical-align: top
	width: $sidebar-width
	.column
		padding: 20px $horizontal_content_padding 0 0
		section
			margin: 0 0 15px

#userbox extends .clearfix
	margin: 1em 0
	@if member
		img.avatar
			float: right
			margin: 0 .2em 0 1em
			padding: 0
			$max-width: 70px
			height: auto
	@endif
	p
		margin: 0 0 2px
	p.now
		margin: 0
	ul
		margin: 0 0 4px 2px
		padding: 0
		list-style: disc inside

img.opaque
	box-shadow: #766 1px 1px 3px
	border-radius: 6px

ul#noava
	margin: 0

#main extends .clearfix
	display: table-cell
	vertical-align: top
	min-height: 200px
	padding: 4px $horizontal_content_padding 12px

// Top header
#top_section
	padding: 8px 30px

@if $context['languages']
	#flags mixes .inline-block // Language flags
		margin: 0 1em 0 0
@endif

@if $settings['enable_news']
	#sitenews
		padding: 7px
		margin-bottom: 7px
		border-bottom: 1px dotted #999
		span extends .horizontal-arrow
			color: #888
			font-weight: 700
		+ #linktree:not(:empty)
			margin-top: -7px
@endif

// Banner header
#banner
	width: 100%
	clear: both
	overflow: hidden
	min-height: 70px

	> div
		width: 100%
		box-sizing: border-box
		padding: 25px 25px 10px
		display: flex
		flex-flow: row wrap
		align-items: baseline

// Main title
h1
	letter-spacing: -1px
	font: 100 2.5em/1em $big_font
	padding-right: .3em
	a
		color: #444
		word-wrap: normal

#slogan
	color: #888
	font: 100 1.4em/1.1em $big_font
	letter-spacing: -1px

// The search box, with a few hacks to allow for a drop-down menu...
#search_form
	float: right
	max-width: 50%
	.search
		float: right
		max-width: 100%
		width: 80px
		transition: width .2s
		&.open
			width: 100%
			transition: width .5s
	.mimenu
		@if ie6
			&, ul li
				width: auto
		@else
			width: 100%
		@endif
		left: 0

// The navigation list (i.e. linktree)
#linktree
	clear: both
	color: #999
	padding: 0 0 1em
	:empty final
		padding: 0
	a
		color: #963
	ul
		padding: 7px
		margin: 0
		list-style: none
		overflow: hidden
		border: 1px dotted #999
		border-width: 0 0 1px 0
	li extends .horizontal-arrow
		display: inline
		line-height: 20px
		padding: .5em .5em .5em 0
		&.last:after mixes .hide

#linktree_bt extends #linktree
	padding: 1em 0 0
	ul
		border-width: 1px 0 0 0

// The footer with copyright links etc.
#footer
	margin: auto
	border-top: 1px solid #bdb5b5
	@if $radius
		border-radius: 0 0 $radius $radius
	@endif

	> div
		padding: 10px 20px

	ul extends .clearfix, li
		margin, padding: 0
		list-style: none
	li
		margin-left: 4px
		line-height: 160%
		:first-child:before
			content: ""
			float: left
			background: url($images/wefoot.png) 0 0 no-repeat
			border-radius: 4px
			padding: 40px 54px 0 0
			margin: 3px 10px 0 0
	.links
		display: block

	a
		color: #679
		border-bottom: 1px dashed #679
		text-decoration: none

// Behold, the power of Wess!
$view_junk = $settings['db_show_debug_who_log']

@if $view_junk == "any" || (admin && $view_junk == "admin") || (member && ($view_junk == "regular" || $view_junk == "mod"))
	#junk
		font-size: 90%
		margin, padding: 8px 0 0
		border-top: 1px solid #aaa
		a
			border-bottom: 0
@endif

/* Styles for the general looks for the default theme.
------------------------------------------------------- */

// Normal, standard links.
a
	color: #47a // #de874d, b96f17, c06002
	text-decoration: none
	cursor: pointer
	:hover
		color: #a54
		text-decoration: underline

// Inside a post, if you publish a link, you want it to stand out...
.post a
	text-decoration: underline

// Links that open in a new window.
a.new_win
	:link, :visited
		color: #679

// Tables should show empty cells.
table
	empty-cells: show

// Wraps the entire forum when a forum width is set.
#wrapper
	margin: auto

// Standard horizontal rule.. ([hr], etc.)
hr
	color, background-color: #ccc
	border: 0
	height: 1px

// Fieldsets are used to group elements.
fieldset
	border: 1px solid #c4c4c4
	padding: 1em
	margin: .5em 0
	border-radius: 10px
	legend
		font-weight: 700
		color: #866
	&.wrc final
		border: 0
		legend
			background: $main_bg
			border-radius: 6px
			padding: 2px 6px

// No image should have a border when linked.
a img
	border: 0

// Define strong as bold, and em as italics
strong
	font-weight: 700

em
	font-style: italic

.ping
	box-shadow: none !important

/* More common styles used for inheritance.
------------------------------------------------------- */

// "With rounded corners" class, for modern browsers...
.wrc, .wrc_top, .wrc_bottom
	margin-top: 2px
	margin-bottom: 4px
	border-radius: 6px
	box-sizing: border-box
	padding: .9em 1.2em
	p
		margin: 0 0 .5em
		:only-child
			margin-top: .5em

.wrc_top // !! Set border-bottom to 0 if you add a border to .wrc
	border-radius: 12px 12px 0 0
	margin-bottom: 0

.wrc_bottom // !! Set border-top to 0 if you add a border to .wrc
	border-radius: 0 0 12px 12px
	margin-top: 0

// Fold/unfold icon
.upshrinks mixes .inline-block
	background: url($images/upshrinks.png) no-repeat
	text-decoration: none

// The 'New' icon, generally speaking.
.note mixes .inline-block
	vertical-align: .1em
	border-radius: 7px
	@if ie[-9], ios[-5.1]
		background-color: #eb8c66
	@else
		gradient: #fa6, #d76
	@endif
	color: #fff !important
	font: 700 7.5pt/115% Tahoma, Arial, sans-serif
	text-transform: uppercase
	margin: 0 3px
	padding: 2px 5px
	:hover
		text-decoration: none
	// In topic pages, needs more space.
	h5 &
		margin-left: 8px

// Same, but scarier.
.notewarn extends .note
	@if ie[-9], ios[-5.1]
		background-color: #d55a61
	@else
		gradient: luma(#d55a61, +10%), luma(#b63c47, +10%)
	@endif

// Same, but positive.
.notenice extends .note
	@if ie[-9], ios[-5.1]
		background-color: rgb(100, 175, 100)
	@else
		gradient: rgb(100, 175, 100), rgb(100, 190, 100)
	@endif

// Same, but neutral. Doesn't get in the way.
.notevoid extends .note
	@if ie[-9], ios[-5.1]
		background-color: rgb(175, 175, 175)
	@else
		gradient: rgb(150, 150, 150), rgb(175, 175, 175)
	@endif

// The sort direction indicator. A small but potentially important detail.
.sort_up mixes .inline-block
	background: url($images/sort.gif) 0 0 no-repeat
	width, height: 12px
	vertical-align: baseline

.sort_down extends .sort_up
	background-position: 0 -12px

/* Custom Select box styles
--------------------------------------------------------- */

select mixes .hide
select[size]
	display: inline

// Move the original <select> outside the viewport,
// thus keeping its tabindex and events working.
select.sb
	display: inline
	position: absolute
	clip: rect(1px, 1px, 1px, 1px)
	width, height: 1px

.sbox mixes .inline-block
	font-weight: 400
	text-align: left
	margin: 1px

	.text mixes .inline-block
		vertical-align: baseline
		small
			color: #aaa

	.details
		font-style: italic
		font-size: 90%
		padding: 3px
		clear: left
		color: #999

	/* Display area (always visible) */
	.display
		background: rgba(255,255,255,.5)
		border: 1px solid #abadb3
		color: #000
		cursor: default
		font-weight: 400
		max-height: 1.9em
		line-height: 1.5em
		overflow: hidden
		position: relative
		text-decoration, outline: none
		padding: 2px 22px 2px 2px
		border-radius: 6px

		.text
			white-space: nowrap
			overflow: visible !important
			padding: 0 3px

		.btn
			position: absolute
			border: 1px solid #707070
			border-radius: 4px
			width: 14px
			text-align: center
			right, top, bottom: 2px
			color: rgba(0,0,0,.5)
			font-size: 7px
			// Replacement gradients for select box buttons.
			@if ie[-8]
				background: #f2f2f2
			@elseif ie
				background: #dbdbdb
				box-shadow: inset -6px 12px 6px -6px #fff
			@else
				background: linear-gradient(#f2f2f2, #ebebeb 50%, #dbdbdb 50%, #cfcfcf)
			@endif

	&.disabled .display
		color: #999

	&.focused .display
		background: #fff

		.text
			border-radius: 4px 0 0 4px
			border-color: #7b7d83
			background-color: #39f
			color: #fcfcfc
			small
				color: #ddd

		.btn
			box-shadow: inset 0 0 1px 1px #9eb0ba

	&.focused .display .btn, .hover .btn
		@if ie
			background: @is (ie[-8], #dcefff, #bce5fc)
		@else
			background: linear-gradient(#eaf6fd, #d9f0fc 50%, #bce5fc 50%, #a7d9f5)
		@endif

	/* Dropdown styles */
	.items
		background: #fff
		border: 1px solid #cbcdd3
		border-radius: 6px
		display: inline
		padding: 2px
		margin: 0
		list-style: none
		overflow: hidden
		position: absolute
		z-index: 999
		box-shadow: 0 2px 5px rgba(0,0,0, .3)

		&.has_bar
			padding-right: 15px

		&.above
			box-shadow: 0 -2px 5px rgba(0,0,0, .3)

		.item
			color: #000
			cursor: default
			display: block
			padding: @is (mobile, 12px 8px, 4px 6px)
			text-decoration: none

		.pitem:hover
			background-color: #eee

		.selected .item
			background-color: #eee

		.disabled .item
			color: #999

		.hr
			border-top: 1px solid #ccc
			padding, height: 0
			margin: 2px

		// <optgroup> styles
		.optgroup .label
			gradient: #fff, #e5eeee
			color: #666
			cursor: default
			font-weight: 700
			padding: 7px
		.sub .item
			padding-left: 15px

		/* Rounded corners */
		.first .item
			border-radius: 6px 6px 0 0
		.last .item
			border-radius: 0 0 6px 6px

	/* Scrollbar viewport */
	.overview, .viewport
		position: relative

	/* The scrollbar itself */
	.scrollbar
		position: absolute
		top: 2px
		right: 1px
		width: 11px
		background: #f5f8f5

		/* Scrollbar thumb */
		div
			position: absolute
			overflow: hidden
			background: #e0e3e0
			background: linear-gradient(90deg, #ddd, #e0e6e0, #ccc)
			border-radius: 6px
			cursor: pointer
			height: 18px
			width: 13px
			left: -1px
			:hover
				background: #e8ece8
				background: linear-gradient(90deg, #ddd, #e8ece8, #ccc)

	/* Multiple selections get a checkbox. */
	input[type=checkbox]
		margin: 0 8px 0 0
		vertical-align: -2px

#sidebar .sbox
	max-width: 200px

#jump_to
	margin: .5em 0
	height: 25px
	visibility: hidden

.cat .sbox
	font-size: 14px
	text-shadow: none

tr.catbg .sbox, tr.titlebg .sbox
	font-size: 11px

.qaction
	font-size: .85em

/* Top-level menu icons.
------------------------------------------------------- */
// It may look complicated, but it isn't. Just fetch documentation on
// image spriting. You can also simply use single images to show icons.

#m_home mixes .inline-block("")
	width, height: 16px
	padding: 0
	margin: 0 4px 0 2px
	background-repeat: no-repeat
	background-image: url($images/icons/sprite.png)
	background-position: -74px 0

#m_board extends #m_home
	background-position: -74px 0

#m_admin extends #m_home
	background-position: -36px 0

#m_profile extends #m_home
	background-position: 0 0

#m_home_media extends #m_home
	background-position: -54px center
	vertical-align: middle
	margin: 0 8px 0 0
	width: 17px

#m_home_mlist extends #m_home
	background-position: -19px center
	vertical-align: middle
	margin: 0 8px 0 3px
	width: 14px

@if guest
	#m_login extends #m_home
		background-position: -112px 0
		width: 15px

	#m_register extends #m_home
		background-position: -130px 0
@endif

@if member
	#m_profile_logout extends #m_home
		background-position: -94px 0
		vertical-align: middle
		width: 15px
		margin: -4px 6px 0 0
@endif

/* Styles for buttons and other form elements
------------------------------------------------------- */

// Let's give all forms zero padding/margins
form
	margin, padding: 0

input, select, textarea
	font: 95%/1.15 $main_font
	color: #000
	background: $main_bg
	box-sizing: border-box
	border-radius: 5px
	border: 1px solid #bbb
	padding: 4px 5px
	:hover
		border: 1px solid #78a

textarea
	line-height: 1.3
	border-radius: 0

// No need to style input[type=reset], not using it.
input[type=submit], input[type=button]
	background: #eee
	transition: all .3s ease
	box-shadow: inset 1px 1px #fff, inset 25px 0 25px rgba(0,0,0, .1), 0 1px 2px rgba(0,0,0, .1)
	outline: none
	cursor: pointer
	font-size: 13.5px
	line-height: 1.2
	border-width: 1px
	border-radius: 6px
	margin: 0
	@if firefox
		padding: 1px 2px 2px
	@elseif ie9
		padding: 4px 4px 2px
	@else
		padding: 3px 5px 4px
	@endif
	color: #555
	// Old IEs have a padding bug...
	@if ie6, ie7
		overflow: visible
	@endif
	:hover, :focus
		transition: all .3s ease
		box-shadow: inset 1px 1px #fff, inset 25px 0 25px rgba(0,0,0, .04), 0 1px 2px rgba(0,0,0, .2)

input.submit mixes .button-padding
	background: url($images/buttons/submit.png) 5px center no-repeat
	background-color: #e2f3ea

input.save mixes .button-padding
	background: url($images/buttons/save.png) 5px center no-repeat
	background-color: #dff3e8

input.delete mixes .button-padding
	background: url($images/buttons/delete.png) 5px center no-repeat
	background-color: #f5efe9

input.new mixes .button-padding
	background: url($images/buttons/new.png) 5px center no-repeat
	background-color: #e0eaf6

input.cancel
	background-color: #fff0e3
	padding-left: 5px

input.search extends #m_home
	background-color: rgba(255,255,235,.32)
	background-position: -147px 3px
	padding: 4px 5px 4px 25px
	height: 25px
	width: auto
	float: none
	margin: 0 2px

// All input elements that are checkboxes or radio buttons shouldn't have a border around them.
input[type=checkbox], input[type=radio]
	mixin: checkbox-styling

.cat input[type=checkbox]
	margin: 5px -3px 0 7px

// Give disabled text input elements a different background color.
input[type=text][disabled]
	background-color: #eee

input[type=file]
	width: 300px

@if webkit
	// Thank you Apple, we like your iPod but we don't want iTunes search boxes in our browsers.
	input[type=search]
		-webkit-appearance: textfield
@endif

/* The dropdown menus, Nao style.
   May not show, but it took years to refine it.
------------------------------------------------------- */

#navi
	color: #999
	border-bottom: 1px solid #bdb5b5
	padding: 0 15px

.menu, .mimenu
	user-select: none
	@if webkit && (ios, android)
		-prefix-tap-highlight-color: rgba(0, 0, 0, 0)
	@endif

.menu
	font-family: $menu_font
	min-height: 2em
	margin: 0 0 @is (ie7, 0, -5px) // fixes h4's margin, see below...
	padding: 5px 0 0

	li a
		color: #444
		text-decoration: none

	li li a
		display: block
		padding: 6px 8px

	h4 mixes .inline-block
		mixin: .vertical-arrow
		padding: 3px 6px
		font-weight: 400
		margin: 0 2px @is (ie7, 0, 10px) 0 // 10px gives more breathing space to the dropdown's arrow...

	li > ul
		opacity: 0
		transition: opacity .15s ease, transform .3s ease, visibility .3s ease
		@if !ie // IE 9-10 behave strangely here.
			transform: translate3d(0, 5px, 0)
		@endif
		display: block
		clear: left
		@if !ie[-7]
			top: 100%
		@endif
		position: absolute
		z-index: 1000
		visibility: hidden
		margin, padding: 0
		border: 1px solid #bbb
		@if ie[9-], chrome, firefox[20-] // Speed matters.
			background: #fcfcfc
			box-shadow: inset 0 50px 50px rgba(232, 236, 232, .8), 2px 2px 3px 0 rgba(0,0,0, .2)
		@else
			background: $menu_gradient
			box-shadow: 2px 2px 3px 0 rgba(0,0,0, .2)
		@endif
		border-radius: 0 10px 10px 0

	ul ul // sub-menus
		transform: translate3d(0, 0, 0)
		left: @is (ie6, 95%, 100%)
		top: 0

	li
		@if ie6
			float: left
		@endif
		@if !ie[-7]
			position: relative
		@endif
		list-style: none
		cursor: pointer

	// For anything else than IE6...
	> li
		display: inline-block
		margin, padding: 0
		> ul extends .arrow_above

	li li
		@if ie6
			float: none
		@endif
		@if ie[-8]
			position: relative
		@endif
		display: block
		margin: 0
		white-space: nowrap
		border-left: 4px solid $menu_border // #fbe2c8

	li:hover > ul
		visibility: visible
		opacity: 1
		transition: opacity .15s ease, transform .3s ease
		transform: translate3d(0, 0, 0)
		ul & // sub-menus
			transform: translate3d(-5px, 0, 0)

	li.active > a
		font-weight: 700

	// We need an .horizontal-arrow for our sub-menus...
	li.subsection > a
		margin-right: 12px
		:after
			opacity: .3
			font: .6em/1 Arial
			vertical-align: .12em
			content: "\a0\a0\25ba"
			position: absolute
			margin-top: .6em
			right: 8px

	// Quick hack for arrow colors on selected parents.
	li:hover > a:after,
	li:hover > h4:after
		opacity: .5
		transition: opacity .3s

	// Hover colors. We're using box-shadow to keep the ability to set hover-independent background colors (see #main_menu).
	li:hover > h4
		box-shadow: inset 0 0 10em rgba(0,0,0, .075)

	li li:hover
		color: #000
		border-radius: 0 9px 9px 0
		background-color: rgba(0,0,0, .075)

	> li > a, h4
		border-radius: 6px

	// This is the magical place where sub-menus get opened and closed!
	li:hover ul ul, li:hover ul ul ul
		visibility: hidden
		opacity: 0

	li:hover ul, ul li:hover ul, ul ul li:hover ul
		visibility: visible
		opacity: 1

	.note
		margin: 2px 0 0 8px

	h4 .note
		float: none
		margin: 0 0 0 4px

// I hate !important, but let's not waste too much time on this...
// This will automatically close the menu once you click it.
.menu ul.done
	visibility: hidden !important

.menu.context
	padding-left: 1em
	min-height: 2.5em
	overflow: hidden
	> li
		display: inline
	h4
		padding-right: 6px
		// We don't need arrows.
		:after mixes .hide

li.chosen h4
	background-color: #95a89d
	font-weight: 700
	color: #fff
	a
		color: #fff

// Hide arrows from menu items with no sub-menus.
li.nodrop h4:after mixes .hide

// Separator code
.menu li.sep
	a
		display: block
		padding: 4px 8px
	hr
		margin: 0
	&:hover
		background: none

#main .menu
	margin-bottom: 4px

// This will show an arrow above menus.
// Classes using this must manually set position: relative.
.arrow_above virtual
	:before, :after
		content: ""
		bottom: 100%
		border: 7px solid transparent
		left: 15px
		position: absolute

	:before
		border-bottom-color: #b5b5b5

	:after
		border-bottom-color: #fbfbf8
		border-width: 6px
		margin: 0 1px

	// Add an extra layer behind the arrow, so we know we're still inside the menu.
	> li:first-child:before
		content: ""
		bottom, width: 100%
		height: 12px
		position: absolute

// Main menus need a darker arrow.
.menu > li > ul
	:after
		border-bottom-color: #e9ede9

@if local
	#main_menu li:hover > h4
		background-color: #5a6c85
		color: #fff
		a
			color: #fff
@endif

#sidemenu mixes .hide
	border-bottom: 1px solid #ccc
	margin: 0 0 10px
	padding: 0 0 10px
	h4 mixes .inline-block
		font-size: 1.4em
		line-height: 1.6em
		padding: 0 6px
		font-weight: 400
	ul
		display: block
		margin: 0
		padding: 0 0 0 20px
	li
		padding: 4px 8px
		margin: 0
		display: block
		font-size: 1.1em

/* Styles for the mini-menus.
---------------------------------------------------- */

// Wrapper span that will contain the menu...
.mime mixes .inline-block("")
	position: relative
	@if ie[-7]
		z-index: 1
	@endif

	// Styling for the parent link when the menu is open.
	:hover > a
		text-decoration: underline

// Styling for the mini-menu container below the parent link...
.mimenu
	z-index: 1000
	position: absolute
	padding: 10px 0 0
	font: @ifnull ($mimenu_font_style, 400) @ifnull ($mimenu_font_size, 14px/20px) @ifnull ($mimenu_font, $main_font)
	top: 100%
	left: -10px

	// ...And for the mini-menu itself (phew.)
	> ul extends .arrow_above
		position: relative
		white-space: nowrap
		background: #fbfbf8 // rgba(255,255,255, .5)
		margin: 0
		padding: 4px
		border-radius: 5px
		border: 1px solid rgba(0,0,0, .2)
		box-shadow: 1px 1px 6px rgba(0,0,0, .25)

		> li
			background-color: $window_bg
			display: block
			margin: 0
			padding: 1px 2px
			text-align: left

	// Right-aligned menus need to push the arrow to the right.
	&.right
		left: auto
		right: -10px
		> ul
			:before, :after
				left: auto
				right: 15px

	// All style changes needed to flip the mini-menu on the X axis.
	&.top
		top: auto
		padding: 0 0 10px
		bottom: 100%
		> ul
			:before, :after
				top: 100%
				border-bottom-color: transparent
			:before
				border-top-color: #b5b5b5
			:after
				border-top-color: #fbfbf8
			> li:first-child:after
				top: 100%

/* Common positioning/sizing classes to ease styling.
------------------------------------------------------- */

// Left and right-floating
.floatleft
	float: left
.floatright
	float: right
.flow_auto
	overflow: auto
.flow_hidden
	overflow: hidden

.clear
	clear: both
.clear_left
	clear: left
.clear_right
	clear: right

.largetext
	font-size: 140%
.normaltext
	font-size: 100%
.smalltext, tr.smalltext th
	font-size: 85%
.tinytext
	font-size: 70%

// Centering an element that has width
.centered
	margin: auto

// Centering, right and left-aligning text within an element
.left
	text-align: left
.center
	text-align: center
.right
	text-align: right

// Some common styles
.nowrap
	white-space: nowrap

.double_height
	line-height: 2em

.padding
	padding: .7em

.main_section
	padding-bottom: .5em

// A quick reset list class.
ul.reset, ul.reset li
	margin, padding: 0
	list-style: none

/* HTML5 overrides for deprecated alignment/width params.
--------------------------------------------------------- */

.wide > table
	min-width: 100%

.w100
	width: 100%
.w75
	width: 75%
.w50
	width: 50%
.w25
	width: 25%

.top, tr.top td, tr.top th
	vertical-align: top
.middle, tr.middle td, tr.middle th
	vertical-align: middle
.bottom, tr.bottom td, tr.bottom th
	vertical-align: bottom

img.center
	margin: 4px auto
img.left
	float: left
	margin-left: 0
img.right
	float: right
	margin-right: 0

/*
	It's important to repeat left/right/center statements to
	respect child priority when setting multiple classes in a table.
	<table><tr class="center"><td class="left"> should be left-aligned.
*/
table
	&.cs0
		border-collapse: separate
		border-spacing: 0
	&.cs1 mixes &.cs0
		border-spacing: 1px
	&.cs3 mixes &.cs0
		border-spacing: 3px
	&.cs8 mixes &.cs0
		border-spacing: 8px
	&.cp0
		th, td
			padding: 0
	&.cp4
		th, td
			padding: 4px
	&.cp8
		th, td
			padding: 8px
	&.left th, &.left td
		text-align: left
	&.right th, &.right td
		text-align: right
	&.center th, &.center td
		text-align: center
	tr
		&.left th, &.left td
			text-align: left
		&.right th, &.right td
			text-align: right
		&.center th, &.center td
			text-align: center
		th.left, td.left
			text-align: left
		th.right, td.right
			text-align: right
		th.center, td.center
			text-align: center

/* Some BBC related styles.
------------------------------------------------------- */

// The "Quote:" and "Code:" header parts...
.bbc_code, .bbc_quote
	> header
		color: #666
		border-bottom: 0
		font-size: 80%
		padding: .3em

// A quote, usually from another post.
.bbc_quote
	border-radius: 6px
	border: 1px dotted #99a
	gradient: rgba(255, 255, 255, .5), rgba(230, 255, 235, .3)
	margin: .8em 0
	// The "Quote:" header part...
	> header
		padding: 2px 2px 2px 24px
		:before
			display: block
			margin-left: -20px
			content: "\201c"
			color: #999
			height: 1px
			font: 3em/1 $serif_font
	> div
		font-size: 92%
		line-height: 1.4em
		border-top: 1px dotted #99a
		overflow: auto
		background: rgba(0, 0, 0, .07)
		border-radius: 6px
		> blockquote
			margin: 12px 16px 8px
			padding: 0

// A code block - regular or with PHP syntax highlighting
.bbc_code, .php_code
	code
		display: block
		font: 8pt/1.5em $mono_font
		background: rgba(230, 242, 245, .5)
		border-top: 2px solid #999
		border-bottom: 2px solid #999
		padding: 3px 1em
		overflow: auto
		white-space: pre
		word-wrap: normal
		// Show a scrollbar after about 24 lines.
		max-height: 24em

// For links to change the code stuff...
.codeoperation
	font-weight: 400

// Styling for [url] tags. Also ensures that long URLs don't break layout.
.bbc_link
	.cut
		:before
			content: "\2026"
		span
			position: absolute
			clip: rect(1px, 1px, 1px, 1px)
	:link, :visited
		color: #789

.bbc_size
	line-height: 1.4em

.bbc_color a
	color: inherit

.bbc_img
	border: 0
	padding: 4px 8px
	max-width: 100%
	// We need to avoid problems with hardcoded img width & height
	// when width is stopped in its tracks by max-width.
	&[width]
		height: auto

.bbc_table
	font, color: inherit
	td
		font, color: inherit
		vertical-align: top

.bbc_u
	text-decoration: underline

.bbc_list
	text-align: left
	li
		padding-top, padding-bottom: 2px

.bbc_tt
	font-family: $mono_font

.bbc_pre
	white-space: pre
	margin, padding: 0

// [img] pics with explicit dimensions set
img.resized
	cursor: pointer

// emote, try typing "/me uses this a lot" in a post.
.meaction
	color: red

// Highlighted text - such as search results.
mark
	background-color: #ffd0a0 !important
	font-weight: 700
	color: #000 !important
	padding: 0 2px 1px

// A more discreet highlight color, for selected membergroups etc.
.highlight
	background-color: #d1e1ef
	color: #000 !important

table.footnotes
	border-top: 1px solid #888
	margin-top: 20px
	padding-top: 4px
	td
		font-size: smaller
		padding: 0 2px
	blockquote &
		margin: 8px 0 4px

td.footnum
	vertical-align: top
	text-align: right
	width: 30px
	a
		text-decoration: none

a.fnotel
	text-decoration: none
	vertical-align: super
	font-size: smaller
	line-height: normal

td.footnum a:target, a.fnotel:target
	background-color: #def !important

.spoiler
	header
		color: gray
		font-size: 90%
		font-style: italic
		input
			padding: 2px 4px
			margin: 4px 8px 4px 4px
	blockquote mixes .hide
		border: 1px dotted #999
		padding: 4px 8px

.readmore
	font-style: italic
	color: gray

.post .headline
	font: italic 120% $serif_font
	padding-bottom: 8px

// Merged double posts
.mergedate
	font-size: 10px
	text-align: right
	color: gray
	padding: 5px 0 0
	margin: 0
	border-bottom: 1px dashed #999

/* Generic, mostly color-related, classes.
------------------------------------------------------- */

section.block extends .wrc
	overflow: hidden
	header extends .wehead
		padding: 3px 12px
		@if $sub_radius
			border-radius: $sub_radius $sub_radius 0 0
		@endif
		margin: -0.9em -1.2em 1em
		a
			text-decoration: underline
	footer extends .wefoot
		padding: 3px 12px
		@if $sub_radius
			border-radius: 0 0 $sub_radius $sub_radius
		@endif
		margin: .5em -1.2em -0.9em
	dl.settings
		margin: 0

.bc
	white-space: nowrap
	font-size: 90%
	width: 5%

tr.catbg
	td extends .wehead, th extends .wehead
tr.titlebg
	td extends .wefoot, th extends .wefoot

// The page navigation area
.pagesection extends .clearfix
	clear: left
	font-size: 90%
	padding: .2em
	#forumposts &
		padding: .2em 30px
	.floatright input
		margin-top: 3px
	.note
		vertical-align: middle
	nav
		padding: 5px 0
		a[data-href]
			font-weight: 700
	strong
		:before
			font-weight: 400
			content: "["
		:after
			font-weight: 400
			content: "]"
	.updown
		font-weight: 700
		padding-left: 1em

// Colors for background of posts requiring approval
.approve
	color: #000
	background-color: #ffeaea
	:nth-of-type(even)
		background-color: #fff2f2

// Color for background of *topics* requiring approval
.approvet
	color: #000
	background-color: #e4a17c
	.windowbg2&
		background-color: #f3bd9f

// Pinned topics get a different background
.pinned
	background-color: #e8d8cf
	.windowbg2&
		background: #f2e3d9
	span
		font-weight: 700

// Locked posts get a different shade, too!
.locked
	background-color: #d4dce2
	font-style: italic
	.windowbg2&
		background: #d8e1e7

// Post error notices, general alert notices
.error,
.alert
	color: red

.success
	color: green

a.moderation_link
	&, :visited
		color: red
		font-weight: 700

/* AJAX notification popup
------------------------------------------------------- */

#ajax mixes .inline-block
	background: rgba(255, 255, 255, .75)
	color: #444
	z-index: 999
	text-align: center
	text-transform: uppercase
	border: 1px solid #fff
	font: 700 12px/15px Arial, sans-serif
	height: 15px
	border-radius, padding: $radius
	position: absolute
	cursor: pointer
	opacity: 1
	transform: scale(1)
	transition: transform .3s ease-in-out, opacity .3s ease-in-out
	&.anim
		opacity: 0
		transform: scale(.8)
		transition: transform .2s ease-in-out, opacity .2s ease-in-out
	a extends .loading
		vertical-align: -2px
		margin: 0 8px 0 2px

/* Definition lists
------------------------------------------------------- */

dl mixes .clearfix
	margin, padding: 0

// Lists with settings use these a lot.
dl.settings
	clear: right
	margin: 5px 0 5px
	dt, dd
		float: left
		padding: 0
	dt
		margin: 5px 0 5px
		clear: both
		width: 40%
	dt.windowbg final
		width: 98%
		margin: 0 0 3px 0
		padding: 0 0 5px 0
	dd
		margin: 5px 0 5px 2%
		width: 56%
	img
		margin: 0 10px 0 0

// Used mainly as <dt> descriptions, but can be used elsewhere too.
dfn
	display: block
	padding: 3px 20px 3px 8px
	font-style: italic
	font-size: 95%
	color: #888

dl#feed
	clear: right
	overflow: auto
	margin: 10px 0 0
	padding: 0
	dt, dd
		margin, padding: 0
	dt
		float: left
		width: 86px
		text-align: right
	dd
		margin: 0 0 2px 90px

/* Styles for section headers.
------------------------------------------------------- */

// .cat, .title and .title2 are closely related... Inheritance fiesta!
.catbase virtual
	overflow: hidden
	padding: 5px 10px 5px
	margin: 4px 0
	font: @ifnull ($head_font_style, 100) @ifnull ($head_font_size, 2em/1) @ifnull ($cat_font, $head_font)
	@if (firefox, webkit, chrome)
		text-rendering: optimizeLegibility
	@endif
	img
		padding-right: 4px

.cat extends .catbase
	clear: left
	letter-spacing: -1px
	color: #777
	@if local
		padding: 10px
		border-left: 5px solid #ffa500
	@endif
	a
		border-bottom: 0 !important
		text-decoration: underline !important
		text-shadow: none
	.table_list &
		margin: -5px

.title extends .catbase
	position: relative
	font-size: @ifnull ($title_font_size, 1.4em)
	padding: 4px 8px
	border, margin: 0
	&, a
		color: #777

	// Customize sidebar section headers
	#sidebar &
		font-size: @ifnull ($sidebar_title_font_size, 1.5em)
		margin: 0 0 15px
		padding: 4px 0 0

.title2 extends .catbase
	font-size: @ifnull ($title_font_size, 1.4em)
	border-bottom: 1px dotted rgba(0,0,0, .5)
	&, a
		color: #777

// A general table class
.table_grid
	border-collapse: separate
	margin-top: .1em
	// The header bars for some tables.
	tr.catbg th
		white-space: nowrap
	tr.catbg, tr.titlebg
		font-size: 10pt
		th
			padding: 4px 3px
		th:first-child
			border-top-left-radius: $sub_radius
		th:last-child
			border-top-right-radius: $sub_radius
	th.left
		padding: 0 .7em
	td, th
		padding: 3px
		border: 1px solid #fff
		border-width: 0 1px 1px 0
	th
		border-width: 0 0 1px 0
	th:last-child input
		margin: 0 2px
	td:last-child
		border-right-width: 0
	tr:last-child td
		border-bottom-width: 0

// GenericList
.additional_row
	padding: .5em 0 .5em

.description extends .plainbox
	overflow: hidden

.description_board extends .plainbox
	margin-top: 0

// An informative style
.information
	padding: .5em 1em
	font-size: 90%
	line-height: 1.6em
	border: 1px solid #bbb
	background: #f0f6f0
	margin: .2em 1px 1em
	p
		padding: .3em 1em
		margin: 0

/* Used for sections that need corners and a border frame.
----------------------------------------------------------- */

.roundframe
	overflow: hidden
	margin-top: 1px
	padding: 10px 10px 9px
	background: #f5f5f5
	border: 1px solid rgba(0,0,0, .15)
	border-radius: $sub_radius
	dl, dt, p
		margin: 0
	p
		padding: .5em

@if $sub_radius
	.round-bottom
		border-radius: 0 0 $sub_radius $sub_radius
@endif

/* Used for the help popup.
----------------------------------------------------------- */

// Body for the HTML popup window version
#help_page
	padding: .5em

// Container for the JavaScript popup version
#popup
	position: fixed
	z-index: 1
	left, top: 0
	opacity: 0
	transform: perspective(1000px)
	transition: transform .3s ease, opacity .3s ease
	@if !ie[-8]
		background-color: rgba(0,0,0, .2)
	@endif
	a
		text-decoration: underline
	&.show
		opacity: 1
		transform: perspective(1000px)
		transition: transform .8s ease, opacity .8s ease

// Actual body for the JavaScript popup
#helf
	background: $main_bg
	border-radius: $radius
	box-shadow: 2px 2px 20px 0 rgba(0,0,0, .5)
	position: absolute
	transform: perspective(1000px) translateY(-20px) rotateX(-20deg)
	transition: transform .3s ease
	&.show
		transform: perspective(1000px)
		transition: transform .8s ease
	header extends .wehead
		padding: 8px
		@if !ie7
			overflow: hidden
		@endif
		text-align: center
		@if $radius
			border-radius: $radius $radius 0 0
		@endif
		border-bottom: 1px solid #bbb
		font-weight: 700
		color: #444
	footer extends .wefoot
		padding: 8px
		@if !ie7
			overflow: hidden
		@endif
		text-align: center
		@if $radius
			border-radius: 0 0 $radius $radius
		@endif
		border-top: 1px solid #bbb
	section
		padding: 16px
		overflow: auto
		font-size: 90%
		background-color: $window_bg
		color: #444
		&.confirm
			padding-left: 60px
			@if $radius
				border-radius: $radius $radius 0 0
			@endif
			background-image: raw-url($images/aeva/failed.png)
			background-position: 10px 50%
			background-repeat: no-repeat
	#likes
		img
			max-width: 40px
		.ava
			width: 45px
			height: 45px
			padding: 1px

#helf.confirm
	header
		line-height: 32px

/* Intertitles
------------------------------------------------------- */

h6
	color: #866
	padding: 0 0 3px
	margin: 12px 0 8px
	border-bottom: 1px solid #ccc
	text-transform: uppercase
	font: 400 10pt "Franklin Gothic Medium", "Franklin Gothic", Tahoma, sans-serif
	img
		vertical-align: -3px
	:first-child
		margin-top: 0

/* Styles used by the auto suggest control.
------------------------------------------------------- */

.auto_suggest mixes .hide
	color: #000
	background: #fff
	border: 1px solid #cbcdd3
	border-radius: $sub_radius
	display: inline
	padding: 2px
	font-size: 90%
	list-style: none
	overflow: hidden
	position: absolute
	text-align: left
	z-index: 999
	box-shadow: 0 2px 5px rgba(0,0,0, .3)
	div
		@if $sub_radius
			border-radius: round(math($sub_radius / 2))
		@endif
		padding: 2px 3px

.auto_suggest_hover
	background-color: #eee
	cursor: pointer

// The dropdown menu toggle icon
#menu_toggle
	float: left
	margin: 10px 12px 0 0

#sidebar_toggle
	float: right
	margin: 3px 0 0 7px

/* Styles for a typical table.
------------------------------------------------------- */

.table_list
	width: 100%
	td, th
		padding: 5px
	a.collapse
		float: right
		margin: -1px 0 0 .5em
	p
		margin, padding: 0

/* Styles for print media.
------------------------------------------------------- */

@media print
	#header, #navi, #sidebar
		display: none !important

/* A few styles for notifications
------------------------------------------------------- */

@if member
	.notifs mixes .inline-block
		user-select: none
		height, line-height: 30px
		cursor: pointer
		overflow: visible
		position: relative
		padding: 0 .4em 0 .1em
		border-radius: $sub_radius
		:hover, &.hover
			background: rgba(0,0,0,.05)

		h6
			text-align: center

		> span
			font-size: 90%

		.like_button
			padding-right: 0

		.mimenu final
			opacity: 0
			visibility: hidden
			transform: perspective(500px) translateY(-10px) rotateX(-45deg)
			transform-origin: 50% 0
			width: 420px
			min-width: 200px
			transition: all .3s ease
			cursor: auto
			top: 100%

			> ul > li
				@if !mobile
					transition: all .3s ease
					box-shadow: inset 0 -300px 300px -20px rgba(0,0,0,.5)
				@endif
				padding: 4px 0 0
				background: #fbfbf8

		.open
			opacity: 1
			visibility: visible
			transform: perspective(500px) rotateX(0)
			transition: all .6s ease
			@if !mobile
				> ul > li
					transition: all .6s ease
					box-shadow: none
			@endif

	.n_container mixes .hardware
		clear: both
		user-select: text
		white-space: normal
		overflow: auto
		border-top: 1px solid #ccc

	.n_item extends .clearfix
		padding: 6px 8px
		position: relative
		border-bottom: 1px solid #ccc
		border-right: 3px solid transparent
		cursor: pointer
		font-size: 90%
		color: #888
		overflow: hidden // prevent floated avatars from bleeding out.

	.n_text
		margin-left: 64px

	.n_icon
		float: left
		margin-top: 5px
		img
			max-width: 50px

	.n_new
		border-right: 3px solid #d76
		color: #000

	.n_read
		padding: 4px
		position: absolute
		bottom, right: 0
		display: none

	.n_time
		float: right
		margin-right: -8px
		@if $sub_radius
			border-radius: round(math($sub_radius / 2))
		@endif
		padding: 1px 4px
		background-color: rgba(0,0,0, .02)

	// The preview area is similar to the notification popup,
	// but it still requires a few tweaks to look fine...
	.n_prev
		font-size: 90%
		padding: 12px
		margin-left: 8px
		border-left: 3px solid #da7
		border-bottom: 1px solid #ccc
@endif

// Used by the Ajax loader. No need to declare it everywhere...
@if $can_animate
	@keyframes spin
		to
			transform: rotate(360deg)
@endif

/* Don't touch this -- these are placeholders for CSS added by Wess.
-------------------------------------------------------------------- */

@dynamic language_flags

@dynamic group_colors

// Unused, but I like to keep these around...
$other_bg = #e7e9b8

/*
	$alphamix is a RGB value that should stand for your main area's background. You
	only need it if you're using alpha values in your CSS. Set to $main_bg if unsure.
*/

$alphamix = $main_bg

/* And our mixin... */

@mixin checkbox-styling
	background: none
	border: 0

/*
	This example is here to showcase the power of mixins.
	- You may use a regular selector and omit the @mixin keyword if you don't need params.
	- You can do any kinds of comparisons on params inside the mixin.
	- You can use : or = in param lists.

	@mixin example($border, $width: 777px, $co: #888)
		width: $width
		font-size: 1em
		background: $main_bg
		@if $border
			padding: 8px
			border: $border
		@endif
		a
			color: $board_col

	.class
		.thing mixes example (2px)
			or...
			mixin: example
			mixin: example(1px dotted white)
			mixin: example(,, #fff)
*/
